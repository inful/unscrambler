package game

import (
	"math/rand"
	"strings"
	"time"
)

var words = []string{
	"abroad",
	"absurd",
	"access",
	"acting",
	"action",
	"active",
	"admire",
	"advise",
	"affect",
	"afford",
	"afraid",
	"agency",
	"agenda",
	"amount",
	"animal",
	"answer",
	"anyone",
	"anyway",
	"appeal",
	"appear",
	"around",
	"arrive",
	"artist",
	"aspect",
	"assess",
	"attack",
	"attend",
	"august",
	"author",
	"backed",
	"barely",
	"battle",
	"beauty",
	"become",
	"before",
	"behalf",
	"behave",
	"behind",
	"belong",
	"better",
	"bishop",
	"border",
	"bottle",
	"bottom",
	"branch",
	"breath",
	"bridge",
	"bright",
	"broken",
	"budget",
	"builder",
	"button",
	"camera",
	"campus",
	"cancel",
	"carbon",
	"career",
	"castle",
	"casual",
	"caught",
	"center",
	"chance",
	"change",
	"charge",
	"choice",
	"choose",
	"chorus",
	"church",
	"circle",
	"client",
	"closed",
	"closer",
	"coffee",
	"column",
	"combat",
	"coming",
	"common",
	"comply",
	"copper",
	"corner",
	"county",
	"course",
	"covers",
	"create",
	"credit",
	"crisis",
	"custom",
	"damage",
	"danger",
	"dealer",
	"debate",
	"decade",
	"decide",
	"defeat",
	"defend",
	"define",
	"degree",
	"demand",
	"depend",
	"deputy",
	"desert",
	"design",
	"desire",
	"detail",
	"detect",
	"device",
	"dialog",
	"differ",
	"dinner",
	"direct",
	"doctor",
	"domain",
	"double",
	"driven",
	"driver",
	"during",
	"easily",
	"eating",
	"editor",
	"effect",
	"effort",
	"eighth",
	"either",
	"eleven",
	"emerge",
	"empire",
	"employ",
	"enable",
	"energy",
	"engine",
	"ensure",
	"entire",
	"entity",
	"equity",
	"escape",
	"estate",
	"ethics",
	"evenly",
	"exceed",
	"except",
	"excess",
	"expand",
	"expect",
	"expert",
	"export",
	"extend",
	"extent",
	"fabric",
	"facing",
	"factor",
	"failed",
	"fairly",
	"family",
	"famous",
	"father",
	"fellow",
	"female",
	"figure",
	"filing",
	"filter",
	"finale",
	"finger",
	"finish",
	"flight",
	"flower",
	"follow",
	"forest",
	"forget",
	"formal",
	"format",
	"foster",
	"fought",
	"fourth",
	"friend",
	"future",
	"garden",
	"gather",
	"gentle",
	"global",
	"golden",
	"ground",
	"growth",
	"handle",
	"happen",
	"harder",
	"hardly",
	"health",
	"height",
	"hidden",
	"honest",
	"impact",
	"import",
	"income",
	"indeed",
	"injury",
	"inside",
	"intend",
	"invest",
	"island",
	"itself",
	"jacket",
	"junior",
	"keeper",
	"kernel",
	"labour",
	"ladder",
	"launch",
	"layout",
	"leader",
	"league",
	"legend",
	"lesson",
	"letter",
	"likely",
	"linked",
	"liquid",
	"listen",
	"little",
	"living",
	"locate",
	"lovely",
	"lumber",
	"luxury",
	"magnet",
	"manage",
	"manual",
	"margin",
	"marine",
	"market",
	"master",
	"matter",
	"medium",
	"member",
	"memory",
	"mental",
	"method",
	"middle",
	"mining",
	"minute",
	"mirror",
	"mobile",
	"modern",
	"modest",
	"module",
	"moment",
	"monkey",
	"motion",
	"mother",
	"museum",
	"mutual",
	"myself",
	"narrow",
	"nation",
	"native",
	"nearby",
	"nearly",
	"nervous",
	"notice",
	"notion",
	"object",
	"obtain",
	"office",
	"online",
	"option",
	"orange",
	"origin",
	"output",
	"oxygen",
	"palace",
	"parent",
	"partly",
	"people",
	"period",
	"permit",
	"person",
	"phrase",
	"planet",
	"player",
	"please",
	"plenty",
	"pocket",
	"police",
	"policy",
	"prefer",
	"pretty",
	"prince",
	"prison",
	"profit",
	"proper",
	"public",
	"pursue",
	"random",
	"rarely",
	"rather",
	"reader",
	"reason",
	"recent",
	"record",
	"reduce",
	"reform",
	"regard",
	"region",
	"relate",
	"relief",
	"remain",
	"remark",
	"remote",
	"remove",
	"repair",
	"repeat",
	"report",
	"rescue",
	"resist",
	"result",
	"retail",
	"retain",
	"return",
	"reveal",
	"reward",
	"ribbon",
	"rising",
	"rocket",
	"roughly",
	"ruling",
	"runner",
	"safety",
	"sample",
	"school",
	"screen",
	"search",
	"season",
	"second",
	"secret",
	"select",
	"senior",
	"series",
	"server",
	"settle",
	"signal",
	"silent",
	"silver",
	"simple",
	"simply",
	"single",
	"sister",
	"socket",
	"social",
	"soldier",
	"source",
	"speech",
	"spirit",
	"spread",
	"spring",
	"square",
	"stable",
	"status",
	"steady",
	"stream",
	"street",
	"stress",
	"strict",
	"strike",
	"strong",
	"studio",
	"submit",
	"sudden",
	"suffer",
	"supply",
	"surely",
	"survey",
	"switch",
	"symbol",
	"system",
	"taking",
	"talent",
	"target",
	"temple",
	"tenant",
	"tender",
	"thanks",
	"theory",
	"though",
	"thread",
	"threat",
	"ticket",
	"timely",
	"toward",
	"travel",
	"treaty",
	"trying",
	"unable",
	"unique",
	"united",
	"unless",
	"update",
	"uplift",
	"upward",
	"usable",
	"vacuum",
	"valley",
	"victim",
	"victory",
	"viewer",
	"violin",
	"visual",
	"volume",
	"walker",
	"wealth",
	"weekly",
	"weight",
	"window",
	"winner",
	"winter",
	"within",
	"wonder",
	"worker",
	"writer",
}

func BuildRounds(count int) []Round {
	if count < 1 {
		count = 1
	}
	pool := make([]string, len(words))
	copy(pool, words)
	rand.New(rand.NewSource(time.Now().UnixNano())).Shuffle(len(pool), func(i, j int) {
		pool[i], pool[j] = pool[j], pool[i]
	})
	rounds := make([]Round, 0, count)
	for i := 0; i < count; i++ {
		word := pool[i%len(pool)]
		rounds = append(rounds, Round{
			Word:      word,
			Scrambled: scrambleWord(word),
		})
	}
	return rounds
}

func scrambleWord(word string) string {
	letters := strings.Split(word, "")
	rand.New(rand.NewSource(time.Now().UnixNano())).Shuffle(len(letters), func(i, j int) {
		letters[i], letters[j] = letters[j], letters[i]
	})
	return strings.Join(letters, "")
}
